(function(){var t;(t=window.rh.consts)("KEY_PROJECT_TOPICLIST",".p.topiclist"),t("KEY_PROJECT_BRSLIST",".p.brslist"),t("KEY_PROJECT_TAG_COMBINATIONS",".p.tag_combinations"),t("KEY_PROJECT_TAG_STATES",".p.tag_states"),t("KEY_MERGED_FILTER_KEY",".p.tags"),t("KEY_PROJECT_FILTER_CAPTION",".p.filter_caption"),t("KEY_PROJECT_FILTER_TYPE",".p.filter_type"),t("KEY_PROJECT_LIST",".p.projects"),t("KEY_MASTER_PROJECT_LIST",".p.masterprojects"),t("KEY_SEARCH_RESULTS",".p.searchresults"),t("KEY_SEARCH_RESULT_PARAMS",".p.searchresultparams"),t("KEY_ONSEARCH_TAG_STATES",".p.onsearchtagstates"),t("KEY_LNG",".p.lng_db"),t("KEY_DEFAULT_FILTER",".p.deffilter"),t("PROJECT_GLOSSARY_DATA",".p.glodata"),t("PROJECT_INDEX_DATA",".p.idxdata"),t("KEY_MERGED_PROJECT_MAP",".mp.tmap"),t("KEY_TOPIC_URL",".t.topicurl"),t("KEY_TOPIC_ID",".t.topicid"),t("KEY_TOPIC_TITLE",".t.topictitle"),t("KEY_TOPIC_BRSMAP",".t.brsmap"),t("KEY_TOPIC_ORIGIN",".t.origin"),t("KEY_TOPIC_HEIGHT",".t.topic_height"),t("KEY_SEARCH_TERM",".l.searchterm"),t("KEY_SEARCHED_TERM",".l.searched_term"),t("KEY_TAG_EXPRESSION",".l.tag_expression"),t("KEY_UI_MODE",".l.uimode"),t("KEY_BASE_IFRAME_NAME",".l.base_iframe_name"),t("KEY_CAN_HANDLE_SERCH",".l.can_handle_search"),t("KEY_CAN_HANDLE_SEARCH",".l.can_handle_search"),t("KEY_CSH_MODE",".l.csh_mode"),t("KEY_ONSEARCH_TAG_EXPR",".l.onsearchtagexpr"),t("KEY_AND_SEARCH",".l.andsearch"),t("KEY_FEATURE",".l.features"),t("KEY_SEARCH_PROGRESS",".l.search_progress"),t("KEY_LAYOUT_VERSION",".l.layout_version"),t("KEY_TOPIC_IN_IFRAME",".l.topic_in_iframe"),t("KEY_SHOW_TAGS",".l.showtags"),t("KEY_DIR",".l.dir"),t("KEY_SEARCH_LOCATION",".l.search_location"),t("KEY_DEFAULT_SEARCH_LOCATION",".l.default_search_location"),t("KEY_FILTER_LOCATION",".l.filter_location"),t("KEY_ACTIVE_TAB",".l.active_tab"),t("KEY_DEFAULT_TAB",".l.default_tab"),t("KEY_ACTIVE_TOPIC_TAB",".l.active_topic_tab"),t("KEY_TOC_DRILL_DOWN",".l.toc_drilldown"),t("KEY_MOBILE_TOC_DRILL_DOWN",".l.mobile_toc_drilldown"),t("KEY_PUBLISH_MODE",".l.publish_mode"),t("KEY_PUBLISH_BASE_URL",".l.publish_base_url"),t("KEY_PROJECTS_BASE_URL",".l.projects_base_url"),t("KEY_INDEX_FILTER",".l.idxfilter"),t("EVT_BASE_IFRAME_LOAD",".e.base_iframe_load"),t("EVT_SCROLL_TO_TOP",".e.scroll_to_top"),t("EVT_SEARCH_TERM",".e.search_term"),t("EVT_NAVIGATE_TO_URL",".e.navigate_to_url"),t("EVT_PROJECT_LOADED",".e.project_loaded"),t("EVT_TOC_LOADED",".e.toc_loaded"),t("EVT_TOPIC_HIDDEN",".e.topic_hidden"),t("EVT_TOPIC_LOADED",".e.topic_loaded"),t("EVT_TOPIC_LOADING",".e.topic_loading"),t("EVT_BOOKMARK",".e.bookmark."),t("EVT_PRINT_TOPIC",".e.print_topic"),t("EVT_SEARCH_IN_PROGRESS",".e.search_in_progress"),t("EVT_RELOAD_TOPIC",".e.reload_topic"),t("EVT_QUERY_SEARCH_RESULTS",".e.query_search_results"),t("EVT_LOAD_IDX",".e.load_idx"),t("EVT_LOAD_GLO",".e.load_glo"),t("HASH_KEY_RH_HIGHLIGHT","rhhlterm"),t("HASH_KEY_RH_SYNS","rhsyns"),t("HASH_KEY_RH_SEARCH","rhsearch"),t("HASH_KEY_RH_TOCID","rhtocid"),t("HASH_KEY_TOPIC","t"),t("HASH_KEY_UIMODE","ux"),t("HASH_KEY_RANDOM","random"),t("PATH_PROJECT_TAGDATA_FILE","whxdata/whtagdata.js"),t("CORDOVA_JS_URL","cordova.js"),t("RHS_LOG_TOPIC_VIEW",{mgr:"sys",cmd:"logtpc"}),t("RHS_DO_SEARCH",{mgr:"agm",agt:"nls",cmd:"search"}),t("KEY_MOBILE_APP_MODE",".m.mobileapp")}).call(this),function(){var t,e,r,n,i;i=window.rh,e=i._,n=i.model,r=i.consts,t=r("KEY_MERGED_PROJECT_MAP"),e.parseProjectName=function(t){return t.replace(/\.\//g,"").replace(/\.$/,"").replace(/\/$/,"")},e.mapTagIndex=function(t,e){return null==e&&(e=""),t?t+"+"+e:t},e.getTags=function(r,i){var o,a,s;return null==i&&(i=""),null==r?r:(o=n.get(t),-1!==(a=r.indexOf("+"))&&(i=r.substring(a+1,r.length),r=r.substring(0,a)),i=e.parseProjectName(i),null!=(null!=(s=o[i])?s[r]:void 0)?o[i][r]:r)},e.getProjectName=function(r){var i,o,a;if(i=n.get(t),null!=r&&null!=i){for(r=e.parentPath(r),a=e.makeRelativePath(r,e.getHostFolder()),a=e.parseProjectName(a);null==i[a];){if((o=a.lastIndexOf("/"))<0){a="";break}a=a.substring(0,o)}r=a}return r},e.evalTagExpression=function(t,r,n){var i,o;return null==n&&(n=""),!r||0===r.length||(!(i=e.getTags(t,n))||0===i.length||(1===i.length&&(""===i[0]||"$"===i[0])||(o=!1,!e.any(r,function(t){if(e.evalMultipleTagExpression(t.c,i))o=!0;else if(t.c.length&&e.evalMultipleTagExpression(t.u,i))return!0;return!1})&&o)))},e.evalMultipleTagExpression=function(t,r){return e.any(t,function(t){return e.evalSingleTagExpression(t,r)})},e.evalSingleTagExpression=function(){var t,r,n,i,o;return t={},o=["&","|","!"],r=function(t){var e;return e=t.splice(t.length-2),t.push(1===e[0]&&1===e[1]?1:0)},i=function(t){var e;return e=t.splice(t.length-2),t.push(1===e[0]||1===e[1]?1:0)},n=function(t,e){var r;return r=t.splice(t.length-1),t.push(1===r[0]?0:1)},function(a,s){var l,u,_,c,E,d,h;if(u=a+":"+s,null!=(c=t[u]))return c;if((h=e.map(a.split(" "),function(t){return-1!==o.indexOf(t)?t:-1===s.indexOf(t)?0:1})).length>1){for(E=[],l=0,_=h.length;l<_;l++)switch(d=h[l]){case"&":r(E);break;case"|":i(E);break;case"!":n(E);break;default:E.push(d)}c=E[0]}else c=h[0];return t[u]=c}}()}.call(this),function(){var t,e,r,n,i;i=window.rh,e=i._,t=i.$,r=i.consts,n=i.model,e.hookClick=function(i){var o,a,s,l,u,_;if(!("button"in i&&0!==i.button||i.defaultPrevented)){for(document.body,u=i.target;;){if(!u||u===document)break;if(s=t.getAttribute(u,"href"))break;u=u.parentNode}if(s&&(s=decodeURI(s),l=n.get(r("KEY_MOBILE_APP_MODE")),!(_=t.getAttribute(u,"target"))||"_self"===_||l)){if("#"===s[0]&&e.isRootUrl())return s.length>1&&(a=""+r("EVT_BOOKMARK")+s,n.isSubscribed(a)?n.publish(a,""):n.publish(r("EVT_NAVIGATE_TO_URL"),{absUrl:""+e.getRootUrl()+s})),e.preventDefault(i);if(e.isValidFileUrl(s)){if(e.isRelativeUrl(s)&&(o=window._getFullPath(e.parentPath(),s)),null==o&&(o=s),!(!l&&_||e.isUrlAllowdInIframe(o)))return t.setAttribute(u,"target","_blank");if(n.publish(r("EVT_NAVIGATE_TO_URL"),{absUrl:o}),!_)return e.preventDefault(i)}}}}}.call(this),function(){var t,e,r,n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=window.rh,r=i._,t=i.$,n=i.consts,i.model.subscribe(n("EVT_PROJECT_LOADED"),function(){return i.model.subscribe(n("KEY_MERGED_PROJECT_MAP"),function(){var t;return t=r.getProjectName(r.filePath()),i.model.publish(n("KEY_TOPIC_ORIGIN"),t)})}),e=function(e){function s(t){this.onTagExpr=o(this.onTagExpr,this),s.__super__.constructor.call(this,t),this.ids=t.ids,this.className=t.className||"rh-hide",this.node=t.node,this.hoverClass="rh-tag-content-hover",this.supClass="rh-applied-tag",this.createTagNode(),this.ids?this.subscribe(n("KEY_TOPIC_ORIGIN"),function(t){return function(){return t.subscribe(n("KEY_TAG_EXPRESSION"),t.onTagExpr)}}(this)):i._debug&&i._d("error","data-tags without any tag combination")}var l;return function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(s,i.Widget),s.prototype.preventClick=function(t){return r.preventDefault(t),!1},s.prototype.onTagExpr=function(t){var e,i;return i=this.get(n("KEY_TOPIC_ORIGIN")),this.get("tags")||(this.tags=r.union(this.ids,function(t){return r.getTags(t,i)}),this.publish("tags",this.tags.join(","))),e=!r.any(this.ids,function(e){return r.evalTagExpression(e,t,i)}),this.toggleClass(e),"rh-hide"!==this.className&&this.toggleClick(e),this.applied=e},s.prototype.toggleClass=function(e){return e?(t.hasClass(this.node,"selected")&&model.publish(n("EVT_TOPIC_HIDDEN"),!0),this.applied?void 0:t.addClass(this.node,this.className)):t.removeClass(this.node,this.className)},s.prototype.toggleClick=function(t){if(t){if(!this.applied)return r.addEventListener(this.node,"click",this.preventClick)}else if(this.applied)return r.removeEventListener(this.node,"click",this.preventClick)},s.prototype.onHover=function(){return t.addClass(this.node,this.hoverClass)},s.prototype.onMouseOut=function(){return t.removeClass(this.node,this.hoverClass)},l=["IMG","OBJECT","VIDEO"],s.prototype.appendNode=function(t){var e,r;return e=this.node,r=null,-1!==l.indexOf(this.node.nodeName)&&(e=this.node.parentNode,r=this.node.nextSibling),r?e.insertBefore(t,r):e.appendChild(t),this.resolveDataAttrs(t)},s.prototype.getAptNames=function(){return this.subscribe("tags",function(t){return function(){var e;return e=[],r.each(t.tags,function(t,r){return e.push(t.replace("att_sep",":"))}),t.publish("showtags",e.join(","))}}(this))},s.prototype.createTagNode=function(){return this.subscribe(n("KEY_SHOW_TAGS"),function(e){return function(r){var n;if(r&&!(t.find(e.node,"sup."+e.supClass).length>0))return n=document.createElement("sup"),e.getAptNames(),t.setAttribute(n,"data-text","showtags"),t.setAttribute(n,"data-mouseover","this.onHover()"),t.setAttribute(n,"data-mouseout","this.onMouseOut()"),t.setAttribute(n,"class",e.supClass),e.appendNode(n)}}(this))},s}(),window.rh.widgets.ContentFilter=e}.call(this),function(){var t,e,r,n,i;i=window.rh,t=i.$,r=i._,n=i.consts,e=function(){function e(t,e,n){var i,o,a,s,l;this.node=t,this.index=e,l=(s=this.parseArg(n)).view,o=s.attrs,a=s.model,i=s.argModel,o&&this.setAttributes(this.node,o),a&&this.setModelArg(this.node,r.extend({},a,i)),l&&this.createView(l,i)}var n;return n={"data-rhwidget":";",class:" "},e.prototype.parseArg=function(t){var e,n,o,a,s,l,u,_,c;return c=t.wName,_=t.wArg,s=t.pipedArgs,(o=i.edWidget(c))&&(u=o.view,n=o.attrs,l=o.vars,a=o.model,e=r.resolveNiceJSON(s.shift()),this.vars=r.extend({},l,_)),{view:u,attrs:n,model:a,argModel:e}},e.prototype.createView=function(t,e){var n,i;return n=r.extend({},t.model,e),i=document.createElement(t.tag||"div"),t.attrs&&this.setAttributes(i,t.attrs),this.setModelArg(i,n),this.node.parentNode.insertBefore(i,this.node)},e.prototype.setAttributes=function(e,n){return r.each(n,function(r,n){return t.setAttribute(e,n,this.resolveValue(this.mergedValue(e,n,r)))},this)},e.prototype.setModelArg=function(e,n){var i;if(!r.isEmptyObject(n))return i=this.resolveValue(JSON.stringify(n)),t.dataset(e,"rhwidget",(t.dataset(e,"rhwidget")||"Basic")+" | "+i)},e.prototype.mergedValue=function(e,r,i){var o,a;return(a=n[r])&&(o=t.getAttribute(e,r)||"")?""+o+a+i:i},e.prototype.resolveValue=function(t){return r.resolveEnclosedVar(t,function(t){return function(e){switch(e){case"this":return JSON.stringify(t.vars);case"@index":return t.index;default:return t.vars[e]}}}(this))},e}(),i.model.subscribe(n("EVT_WIDGET_BEFORELOAD"),function(){return r.each(t.find(document,"[data-edwidget]"),function(n,i){var o;return o=r.resolveWidgetArgs(t.dataset(n,"edwidget")),r.each(o,function(t){return new e(n,i,t)}),t.dataset(n,"edwidget",null)})}),i.edWidget=r.cache(r.isObject)}.call(this),function(){(0,window.rh.edWidget)("tab",{attrs:{"data-table":"data","data-rhwidget":"Basic","data-output":"data: edw.data.#{@index}",class:"print-only"},view:{tag:"div",attrs:{"data-rhwidget":"Basic: include: edwidgets/tab/tabLayout.js","data-input":"data: edw.data.#{@index}"},model:{tab:"0"}}})}.call(this),function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var _=r[a]={exports:{}};e[a][0].call(_.exports,function(t){var r=e[a][1][t];return i(r||t)},_,_.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(r,n,i){var o=t.rh,a=o._,s=o.consts;a.getHostFolder=function(){var r=void 0;return r=null,function(){return null==r&&(r=a.isLocal()?t.gHostPath:e.location.protocol+"//"+t.gHost+t.gHostPath),r}}(),a.getHostData=function(e){var r=void 0;return r=t._getFullPath(a.parentPath(),e+"/"),t._isHTTPUrl(r)?{gHost:t._getHostNameFromURL(r),gHostPath:t._getPathFromURL(r)}:{gHost:"",gHostPath:r}},a.getHashMapForRoot=function(t,e){var r=void 0,n=void 0;return null==e&&(e=null),t=a.fixRelativeUrl(t),n=a.urlParams(a.extractParamString(t)),e&&(n[s("RHMAPID")]=null,n[s("RHMAPNO")]=null),r=a.extend(a.urlParams(),n),r=a.fixHashMapForRoot(r)},a.getParamsForRoot=function(t,e){var r=void 0,n=void 0;return null==e&&(e=null),r=a.getHashMapForRoot(t,e),0===(n=a.mapToEncodedString(r)).length?"":"?"+n},a.isRootUrl=function(t){var r=void 0,n=void 0,i=void 0;return null==t&&(t=decodeURI(e.location.href)),i=a.getRootUrl(),(n=a.filePath(t))===a.filePath(i)||("index.htm"===(r=a.getFileName(i))||"index.html"===r)&&n===a.parentPath(i)},a.isExternalUrl=function(t){var e=void 0;return e=o.model.get(o.consts("KEY_PUBLISH_MODE"))?o.model.get(o.consts("KEY_PROJECTS_BASE_URL")):a.getHostFolder(),t.substring(0,e.length)!==e},a.fixHashMapForRoot=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0;return null==t&&(t={}),n=s("HASH_KEY_RH_SEARCH"),s("HASH_KEY_TOPIC"),o=s("HASH_KEY_UIMODE"),i=s("HASH_KEY_RH_TOCID"),r=s("HASH_KEY_RH_HIGHLIGHT"),e=s("HASH_KEY_RANDOM"),t[o]||(t[o]=null),t[e]=null,t[i]||(t[i]=null),t[r]||(t[r]=null),t[n]||(t[n]=null),t},a.fixRelativeUrl=function(t){return null==t&&(t=""),"."===(t=t.replace(/\/\.\//g,"/"))[0]&&"/"===t[1]&&(t=t.substring(2)),t},a.ensureSlash=function(t){return null!=t&&"/"!==t.substr(-1)&&(t+="/"),t},a.isUrlAllowdInIframe=function(){var t=void 0;return t=["",".htm",".html",".asp",".aspx"],function(e){var r=void 0,n=void 0;return!a.isExternalUrl(e)&&(n=e.substring(a.getHostFolder().length),r=a.getFileExtention(n).toLowerCase(),t.includes(r))}}()},{}],2:[function(t,e,r){var n=t("./rh").consts;n("RHMAPID","rhmapid"),n("RH_FULL_LAYOUT_PARAM","rhfulllayout"),n("EVT_TOPIC_WIDGET_LOADED",".e.topic_widget_loaded"),n("EVT_CLOSE_SEARCH_SUGGESTION",".e.close_search_suggestion"),n("KEY_TOC_BREADCRUMBS",".p.toc_breadcrumbs"),n("KEY_TOC_SELECT_ITEM",".p.toc_select_item"),n("KEY_TOC_ORDER",".p.toc_order"),n("SEARCH_MAP_ADDR","whxdata/searchAuto_Map_0.js"),n("SEARCH_MODEL_ADDR","whxdata/searchAuto_Model_"),n("SEARCH_INDEX_DATA",".l.search_index_data"),n("SEARCH_INDEX_FILE","whxdata/searchAuto_Index.js"),n("SEARCH_MODEL_KEY",".l.search_model."),n("SEARCH_MAP_KEY",".l.search_map."),n("SEARCH_MAX_TOPICS",20),n("SEARCH_RESULTS_KEY","search_results"),n("STOP_NAVIGATE_TO_TOPIC",".l.stoptopicnav"),n("SEARCH_WORDS_MAP",".l.search_words_map"),n("MAX_SEARCH_INPUT",3),n("KEY_BREADCRUMBS",".l.breadcrumbs"),n("HASH_HOMEPAGE_MODE","homepage"),n("KEY_VIEW_MODE",".l.mode"),n("HELP_LAYOUT_MODE","layout"),n("HELP_SEARCH_MODE","search"),n("HELP_TOPIC_MODE","topic"),n("PREV_SEARCH_KEY","data-prev-search"),n("FAVATTRIBUTE","data-favwidget"),n("FAVBUTTON","fav-button"),n("FAVLIST","fav-list"),n("FAVSTORAGE","fav-store"),n("FAVLINKCLASS","favorite"),n("UNFAVLINKCLASS","unfavorite"),n("FAVTABLECLASS","favoritesholder"),n("FAVTABLETITLECLASS","favorite"),n("FAVTABLEREMOVECLASS","removelink"),n("FAVLISTINTROCLASS","favoritesintro"),n("FAVLISTTABLEINTROCLASS","favoritestableintro"),n("EVENTFAVCHANGE","favorite-changed-in-script"),n("TOPIC_FAVORITE",".l.topic_favorite"),n("KEY_FAVORITES",".l.favorites"),n("FAVORITES_BUTTON_TITLE",".l.favorites_title"),n("EVT_WINDOW_LOADED",".e.win_loaded"),n("KEY_LNG_NAME",".p.lng_name"),n("SHOW_MODAL",".l.show_modal"),n("KEY_HEADER_LOGO_PATH",".l.header.logo"),n("KEY_HEADER_TITLE",".l.header.title"),n("KEY_HEADER_TITLE_COLOR",".l.header.title_color"),n("KEY_HEADER_BACKGROUND_COLOR",".l.header.background_color"),n("KEY_LAYOUT_FONT_FAMILY",".l.layout.font_family"),n("KEY_HEADER_HTML",".l.header.html"),n("KEY_HEADER_CSS",".l.header.css"),n("KEY_HEADER_DEFAULT_BACKGROUND_COLOR",".l.header.default_background_color"),n("KEY_HEADER_DEFAULT_TITLE_COLOR",".l.header.default_title_color"),n("KEY_LAYOUT_DEFAULT_FONT_FAMILY",".l.layout.default_font_family")},{"./rh":3}],3:[function(e,r,n){(function(t){void 0===t.rh&&(t.rh={}),r.exports=t.rh}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==t?t:{})},{}],4:[function(t,e,r){t("../lib/rh"),t("../lib/consts"),t("../../lenient_src/robohelp/common/url_utils"),t("./utils/home_utils"),t("./utils/url_utils"),t("./utils/io_utils"),t("./utils/html_resolver"),t("./layout/data_attrs/popup_image"),t("./layout/data_attrs/focusif"),t("./common/init")},{"../../lenient_src/robohelp/common/url_utils":1,"../lib/consts":2,"../lib/rh":3,"./common/init":5,"./layout/data_attrs/focusif":6,"./layout/data_attrs/popup_image":7,"./utils/home_utils":8,"./utils/html_resolver":9,"./utils/io_utils":10,"./utils/url_utils":12}],5:[function(t,e,r){var n=t("../../lib/rh"),i=n.consts,o=n.$,a=n.model;a.subscribe(i("EVT_PROJECT_LOADED"),function(){var t=o("html",0),e=a.get(i("KEY_LNG_NAME"));t&&e&&""!==e&&o.setAttribute(t,"lang",e)}),a.subscribe(i("KEY_AND_SEARCH"),function(t){return""===t&&a.publish(i("KEY_AND_SEARCH"),"1")})},{"../../lib/rh":3}],6:[function(t,e,r){t("../../../lib/rh").registerDataAttr("focusif",function t(e,r,i){n(this,t),e.subscribeDataExpr(i,function(t){t&&r.focus()})})},{"../../../lib/rh":3}],7:[function(t,e,r){var o=t("../../../lib/rh"),a=o._,s=o.$,l=t("../../utils/html_resolver"),u=t("../../utils/node_utils"),_=function(){function t(e,r,i){n(this,t),s.addClass(r,"popup-image-thumbnail"),this.node=r,o.model.csubscribe("EVT_PROJECT_LOADED",this._addEnlargeButton.bind(this)),this._clickFn=this._getClickFn(i),a.addEventListener(r,"click",this._clickFn)}return i(t,[{key:"_content",value:function(t){var e=[],r=s.createElement("img");if(s.setAttribute(r,"src",t),e.push(r),s.hasAttribute(this.node,"usemap")){var n=s.getAttribute(this.node,"usemap");s.setAttribute(r,"usemap",n),e.push(s(n,0))}return(new l).resolve(a.map(e,function(t){return u.outerHTML(t)}).join(" "))}},{key:"_getClickFn",value:function(t){var e=this;return function(){o.model.cpublish("SHOW_MODAL",{content:e._content(t),isImage:!0})}}},{key:"_addEnlargeButton",value:function(){var t=s.createElement("img",this.node);s.setAttribute(t,"src",this.expandImagePath),s.addClass(t,"rh-expand-icon"),u.insertAfter(this.node,t),a.addEventListener(t,"click",this._clickFn)}},{key:"expandImagePath",get:function(){var t=(new l).makeFullPath("template/images/expand.png",a.getRootUrl());return a.makeRelativeUrl(t)}}]),t}();o.registerDataAttr("popupimage",_)},{"../../../lib/rh":3,"../../utils/html_resolver":9,"../../utils/node_utils":11}],8:[function(t,r,n){var i=t("../../lib/rh"),o=i._,a=i.consts;o.goToHome=function(t,r){var n=a("HOME_FILEPATH");if(n){var i=o.makeFullUrl(n);i=""+i+(void 0===r?"":"?"+o.mapToEncodedString(r))+(void 0===t?"":"#"+o.mapToEncodedString(t)),e.location=i}},o.isHomeUrl=function(t){var e=a("HOME_FILEPATH"),r=o.getRootUrl(),n=o.makeRelativePath(t,r);return e===o.filePath(n)},o.compare=function(t,e){return t===e?0:-1}},{"../../lib/rh":3}],9:[function(t,e,r){var o=t("../../lib/rh"),a=o.$,s=o._,l=t("./node_utils"),u={scheme:function(t){var e=void 0,r=void 0;return-1!==(e=t.indexOf(":"))&&(r=t.substring(0,e+1).toLowerCase().trim()),r}},_=function(){function t(){n(this,t)}return i(t,[{key:"paths",get:function(){return["src","href"]}},{key:"links",get:function(){return["href"]}}]),i(t,[{key:"resolve",value:function(t){var e=this,r=l.toHtmlNode(t);return s.each(r,function(t){l.isElementNode(t)&&a.traverseNode(t,function(t){return e.resolveNode(t)})}),s.reduce(r,function(t,e){return t+=l.outerHTML(e)},"")}},{key:"resolveNode",value:function(t){var e=this;return s.each(this.paths,function(r){return e.resovePaths(t,r)}),s.each(this.links,function(r){return e.resoveLinks(t,r)}),!0}},{key:"resovePaths",value:function(t,e){if(a.hasAttribute(t,e)){var r=a.getAttribute(t,e);a.setAttribute(t,e,this.resovePath(r))}}},{key:"resoveLinks",value:function(t,e){a.hasAttribute(t,e)&&a.setAttribute(t,"data-click","@close(true)")}},{key:"resovePath",value:function(t){if(!s.isRelativeUrl(t))return t;var e=s.getRootUrl(),r=s.makeFullUrl(t);return s.makeRelativeUrl(r,e)}},{key:"makeFullPath",value:function(t,e){if(!this.isRelativeUrl(t)||this.isRelativeUrl(e))return t;var r=this.filePath(e).split("/"),n=this.filePath(t),i=t.substring(n.length),o=n.split("/");return(o.length>1||o[0])&&(r.pop(),s.each(o,function(t){".."===t?r.pop():"."!==t&&r.push(t)})),""+r.join("/")+i}},{key:"isRelativeUrl",value:function(t){return!t||!u.scheme(t)&&t.trim().indexOf("/")}},{key:"filePath",value:function(t){var e=void 0;return t=t||"",-1!==(e=t.indexOf("?"))&&(t=t.substring(0,e)),-1!==(e=t.indexOf("#"))&&(t=t.substring(0,e)),t}}]),t}();e.exports=_},{"../../lib/rh":3,"./node_utils":11}],10:[function(t,e,r){var n={8:"backspace",13:"return",27:"escape",38:"down",40:"up",39:"right"};t("../../lib/rh")._.getKeyIndex=function(t){return n[t]?n[t]:"default"}},{"../../lib/rh":3}],11:[function(t,e,r){var n=t("../../lib/rh").$;e.exports={nodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},removeChild:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parentNode(t);return e&&e.removeChild&&e.removeChild(t)},appendChild:function(t,e){return t&&t.appendChild&&t.appendChild(e)},parentNode:function(t){return t&&t.parentNode},childNodes:function(t){return t&&t.childNodes||[]},toHtmlNode:function(t){return this.childNodes(n.createElement("div",t))},outerHTML:function(t){return t&&t.outerHTML||""},insertAfter:function(t,e){return t.parentNode.insertBefore(e,t.nextSibling)},value:function(t){return t&&t.nodeValue},name:function(t){return t&&t.nodeName},type:function(t){return t&&t.nodeType},isElementNode:function(t){return this.type(t)===this.nodeType.ELEMENT_NODE},isTextNode:function(t){return this.type(t)===this.nodeType.TEXT_NODE}}},{"../../lib/rh":3}],12:[function(t,e,r){var n=t("../../lib/rh"),i=n._;i.addParam=function(t,e,r){var o=i.extractHashString(t),a=i.extractParamString(t),s=i.urlParams(a);s[e]=r;var l=i.stripBookmark(t);l=i.stripParam(l);var u=""===o?o:"#"+o,_=n._.mapToEncodedString(s);return l+(""===_?_:"?"+_)+u},i.removeParam=function(t,e){var r=i.extractHashString(t),o=i.extractParamString(t),a=i.urlParams(o);a[e]=null;var s=i.stripBookmark(t);s=i.stripParam(s);var l=""===r?r:"#"+r,u=n._.mapToEncodedString(a);return s+(""===u?u:"?"+u)+l},i.createHashedUrl=function(t){var e=void 0,r=void 0;if(!i.isRootUrl(t)){var n=i.getRootUrl();i.isExternalUrl(t)?e=t:(r=i.getParamsForRoot(t,!0),e=i.fixRelativeUrl(i.makeRelativePath(t,n)),t=""+n+r+"#t="+encodeURIComponent(e))}return t}},{"../../lib/rh":3}]},{},[4])}(window,document,window.location);